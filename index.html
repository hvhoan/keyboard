<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Print Image</title>
  <script type="text/javascript">

    var appscheme = 'tmprintassistant://';           //scheme name                                                                           Input condition:Required
    var host = 'tmprintassistant.epson.com/';        //host name                                                                             Input condition:Required
    var action = 'print?';                     //action name                                                                           Input condition:Required
    var query_success = 'success';                   //URL to be displayed when TM Print Assistant has terminated normally.                  Input condition:Can be omitted
    var query_ver = 'ver';                           //Version number                                                                        Input condition:Required
    var query_datatype = 'data-type';                //Type of print data                                                                    Input condition:Required
    var query_data = 'data';                         //Print data                                                                            Input condition:Required
    var query_cut = 'cut';
    var query_reselect = 'reselect';
    var query_fittowidth = 'fit-to-width';           //Scaling up or down print data in accordance with paper width Supported data-type: pdf Input condition:Can be omitted (Default : no)
    var query_paperwidth = 'paper-width';            //Specifying paper width (mm)                                                           Input condition:Can be omitted (Default : 80)
    var xmlData = '<epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print">\n' +
      '<text align="center"/>\n' +
      '<symbol type="qrcode_model_1" level="default" width="3" height="0" size="0">order_sfid</symbol>\n' +
      '<feed unit="30"/>\n' +
      '<text>                                &#10;</text>\n' +
      '<text>THE STORE 11234 (555) 555 - 5555 &#10;</text>\n' +
      '<feed line="3"/>\n' +
      '<cut type="feed"/>\n' +
      '</epos-print>'; //ePOS-Print XML data

    function sendXml() {
      var success = window.location.href;
      var ver = '1';
      var datatype = 'eposprintxml';
      var htmlData = '';
      var reselect = 'yes';
      var urldata = '';


      urlData = appscheme + host + action +
        query_success + '=' + encodeURIComponent(success) + '&' +
        query_ver + '=' + ver + '&' +
        query_datatype + '=' + datatype + '&' +
        query_reselect + '=' + reselect + '&' +
        query_data + '=' + encodeURIComponent(xmlData);
      //Print XML
      location.href = urlData;
      console.log(urlData);
    }

    function sendXml1() {
      var success = window.location.href;
      var ver = '1';
      var datatype = 'pdf';
      var reselect = 'yes';
      var cut = 'feed';
      var fittowidth = 'yes';
      var paperwidth = '58';
      var urlData = '';
      var pdfData = '8PDw8A8PDw/w8PDwDw8PD/Dw8PAPDw8P8PDw8A8PDw/w8PDwDw8PD/Dw8PAPDw8P'

      urlData = appscheme + host + action +
        query_success + '=' + encodeURIComponent(success) + '&' +
        query_ver + '=' + ver + '&' +
        query_datatype + '=' + datatype + '&' +
        query_data + '=' + encodeURIComponent(pdfData) + '&' +
        query_reselect + '=' + reselect + '&' +
        query_cut + '=' + cut + '&' +
        query_fittowidth + '=' + fittowidth + '&' +
        query_paperwidth + '=' + paperwidth;
      location.href = urlData;
      console.log(urlData);

    }

    // function sendXml2() {
    //   location.href = 'tmprintassistant://tmprintassistant.epson.com/print?success=http%3A%2F%2Flocalhost%3A4200%2Fcomplete%3Fcode%3D200&ver=1&data-type=eposprintxml&data=%3Cepos-print%20xmlns%3D%22http%3A%2F%2Fwww.epson-pos.com%2Fschemas%2F2011%2F03%2Fepos-print%22%3E%0A%3Ctext%20align%3D%22center%22%2F%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Cimage%20width%3D%22188%22%20height%3D%22188%22%20color%3D%22color_1%22%20mode%3D%22mono%22%3E%5Bobject%20Object%5D%3C%2Fimage%3E%3C%2Fepos-print%3E';
    // }

    // function sendXml3() {
    //   location.href = 'tmprintassistant://tmprintassistant.epson.com/print?success=http%3A%2F%2Flocalhost%3A4200%2Fcomplete%3Fcode%3D200&ver=1&data-type=eposprintxml&data=%3Cepos-print%20xmlns%3D%22http%3A%2F%2Fwww.epson-pos.com%2Fschemas%2F2011%2F03%2Fepos-print%22%3E%0A%3Ctext%20align%3D%22center%22%2F%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Cimage%20width%3D%22188%22%20height%3D%22188%22%20color%3D%22color_1%22%20mode%3D%22mono%22%3E%5Bobject%20Object%5D%3C%2Fimage%3E%3C%2Fepos-print%3E';
    // }

    // function sendXml4() {
    //   location.href = 'tmprintassistant://tmprintassistant.epson.com/print?success=http%3A%2F%2Flocalhost%3A4200%2Fcomplete%3Fcode%3D200&ver=1&data-type=eposprintxml&data=%3Cepos-print%20xmlns%3D%22http%3A%2F%2Fwww.epson-pos.com%2Fschemas%2F2011%2F03%2Fepos-print%22%3E%0A%3Ctext%20align%3D%22center%22%2F%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Cimage%20width%3D%22188%22%20height%3D%22188%22%20color%3D%22color_1%22%20mode%3D%22mono%22%3E%5Bobject%20Object%5D%3C%2Fimage%3E%3C%2Fepos-print%3E';
    // }

    // function sendXml5() {
    //   location.href = 'tmprintassistant://tmprintassistant.epson.com/print?success=http%3A%2F%2Flocalhost%3A4200%2Fcomplete%3Fcode%3D200&ver=1&data-type=eposprintxml&data=%3Cepos-print%20xmlns%3D%22http%3A%2F%2Fwww.epson-pos.com%2Fschemas%2F2011%2F03%2Fepos-print%22%3E%0A%3Ctext%20align%3D%22center%22%2F%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Ctext%3EHello%20world%3C%2Ftext%3E%0A%3Cimage%20width%3D%22188%22%20height%3D%22188%22%20color%3D%22color_1%22%20mode%3D%22mono%22%3E%5Bobject%20Object%5D%3C%2Fimage%3E%3C%2Fepos-print%3E';
    // }
  </script>
</head>

<body>
  <h1>Epson TM Print Assistant Sample Program</h1>
  <p><button onclick="sendXml()">Print XML</button></p>
  <p><button onclick="sendXml1()">Print XML 1</button></p>
  <!-- <p><button onclick="sendXml2()">Print XML 2</button></p> -->
  <!-- <p><button onclick="sendXml3()">Print XML 3</button></p>
  <p><button onclick="sendXml4()">Print XML 4</button></p>
  <p><button onclick="sendXml5()">Print XML 5</button></p> -->
</body>

</html>
